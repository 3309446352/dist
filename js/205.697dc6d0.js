"use strict";(self["webpackChunkrx"]=self["webpackChunkrx"]||[]).push([[205],{4205:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my"},[t.userInfo.userBg?e("div",{staticClass:"my-bg",style:{backgroundImage:`url('${t.userInfo.userBg}')`}},[e("van-uploader",{staticClass:"upload-box",staticStyle:{width:"100%",height:"200px",color:"aqua"},attrs:{"after-read":t.uploadBg}})],1):t._e(),e("div",{staticClass:"my-info"},[e("div",{staticClass:"clearfix"},[e("div",{staticClass:"my-img fl"},[t.userInfo.userBg?e("img",{staticClass:"auto-img",attrs:{src:t.userInfo.userImg,alt:""}}):t._e()]),e("div",{staticClass:"my-info-box fl"},[e("div",{staticClass:"user-name"},[t._v(t._s(t.userInfo.nickName))]),e("div",{staticClass:"user-desc"},[t._v(t._s(""==t.userInfo.desc?"这个家伙很懒什么都没留下":t.userInfo.desc))])])])]),e("div",{staticClass:"list-box"},t._l(t.listData,(function(s,a){return e("van-cell",{key:a,attrs:{title:s.title,"is-link":""},on:{click:function(e){return t.goPage(s.name)}}})})),1)])},i=[],r={name:"My",data(){return{listData:[{title:"个人资料",name:"Account"},{title:"我的订单",name:"Order"},{title:"我的收藏",name:"Like"},{title:"我的足迹",name:"Track"},{title:"地址管理",name:"Address"},{title:"安全中心",name:"Secure"}],userInfo:{}}},created(){this.getUserInfo()},methods:{getUserInfo(){let t=localStorage.getItem("token");if(!t)return this.$toast("请先登录"),void this.$router.push({name:"Login"});this.$toast.loading({message:"加载中……",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findMy",params:{appkey:this.appkey,tokenString:t}}).then((t=>{this.$toast.clear(),700==t.data.code?this.$router.push({name:"Login"}):"A001"==t.data.code&&(this.userInfo=t.data.result[0])})).catch((t=>{this.$toast.clear()}))},uploadBg(t){let e=["gif","png","jpg","jpeg"],s=1,a=t.file.type.split("/")[1];if(-1===e.indexOf(a))return void this.$toast(`文件类型只支持${e.join(",")}`);let i=t.file.size/2048/2048;if(i>s)return void this.$toast(`文件允许最大不能超过${s}MB`);let r=t.content.replace(/^data:image\/[A-Za-z]+;base64,/,""),o=localStorage.getItem("token");if(!o)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中……",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/updateUserBg",data:{appkey:this.appkey,tokenString:o,imgType:a,serverBase64Img:r}}).then((t=>{this.$toast.clear(),700==t.data.code?this.$router.push({name:"Login"}):"I001"==t.data.code&&(this.userInfo.userBg=t.data.userBg),this.$toast(t.data.msg)})).catch((t=>{this.$toast.clear()}))},goPage(t){this.$router.push({name:t})}}},o=r,n=s(1001),l=(0,n.Z)(o,a,i,!1,null,null,null),u=l.exports}}]);
//# sourceMappingURL=205.697dc6d0.js.map