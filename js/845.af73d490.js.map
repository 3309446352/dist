{"version":3,"file":"js/845.af73d490.js","mappings":"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","sources":["webpack://rx/./src/components/BgBox.vue","webpack://rx/src/components/BgBox.vue","webpack://rx/./src/components/BgBox.vue?4993","webpack://rx/./src/components/BgBox.vue?8360","webpack://rx/./src/views/Secure.vue","webpack://rx/src/views/Secure.vue","webpack://rx/./src/views/Secure.vue?9695","webpack://rx/./src/views/Secure.vue?cea7","webpack://rx/./src/assets/validForm.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"bg-box\"},[_c('div',{staticClass:\"bg\"}),_c('div',{staticClass:\"bg-content\"}),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"bg-box\">\r\n        <div class=\"bg\"></div>\r\n        <div class=\"bg-content\"></div>\r\n        <slot></slot>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name:\"BgBox\",\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.bg-box{\r\n    .bg{\r\n        height: 100px;\r\n        background-color: #0c34ba;\r\n        \r\n    }\r\n    .bg-content{\r\n        margin: 0 10px;\r\n        padding: 10px;\r\n        position: relative;\r\n        top:-20px;\r\n        background-color: #fff;\r\n        border-top-left-radius:15px ;\r\n        border-top-right-radius:15px;\r\n    }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BgBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BgBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BgBox.vue?vue&type=template&id=eec436ba&scoped=true&\"\nimport script from \"./BgBox.vue?vue&type=script&lang=js&\"\nexport * from \"./BgBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BgBox.vue?vue&type=style&index=0&id=eec436ba&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eec436ba\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{},[_c('van-nav-bar',{attrs:{\"title\":\"安全中心\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_c('BgBox',[_c('div',{staticClass:\"conf\"},[_c('van-cell',[_c('van-cell',{attrs:{\"is-link\":\"\"},on:{\"click\":_vm.showPopup}},[_vm._v(\"修改密码\")]),_c('van-popup',{style:({ height: '40%' }),attrs:{\"position\":\"bottom\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('van-form',{staticClass:\"Signup\"},[_c('p',[_vm._v(\"修改密码\")]),_c('van-field',{attrs:{\"type\":\"OldPassword\",\"name\":\"password\",\"label\":\"旧密码\",\"placeholder\":\"旧密码(6-16)位\",\"rules\":[{ required: true, message: '旧请填写密码' }]},model:{value:(_vm.oldPassword),callback:function ($$v) {_vm.oldPassword=$$v},expression:\"oldPassword\"}}),_c('van-field',{attrs:{\"type\":\"Password\",\"name\":\"password\",\"label\":\"新密码\",\"placeholder\":\"密码(6-16)位\",\"rules\":[{ required: true, message: '请新填写密码' }]},model:{value:(_vm.Password),callback:function ($$v) {_vm.Password=$$v},expression:\"Password\"}}),_c('div',{staticClass:\"SignupT\",on:{\"click\":_vm.updatePassword}},[_vm._v(\"确认修改\")])],1)],1)],1),_c('van-cell',[_c('van-cell',{attrs:{\"is-link\":\"\"},on:{\"click\":_vm.showPopupt}},[_vm._v(\"注销账号\")])],1),_c('br'),_c('br'),_c('br'),_c('div',{staticStyle:{\"margin\":\"16px\",\"bottom\":\"0%\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"color\":\"rgb(13, 0, 255)\",\"type\":\"info\",\"native-type\":\"submit\"},on:{\"click\":_vm.tologin}},[_vm._v(\" 退出登录\")])],1)],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"\">\r\n        <van-nav-bar title=\"安全中心\" left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" />\r\n        <BgBox>\r\n            <div class=\"conf\">\r\n                <van-cell>\r\n                    <van-cell is-link @click=\"showPopup\">修改密码</van-cell>\r\n                    <van-popup v-model=\"show\" position=\"bottom\" :style=\"{ height: '40%' }\">\r\n                        <van-form class=\"Signup\">\r\n                            <p>修改密码</p>\r\n                            <van-field v-model=\"oldPassword\" type=\"OldPassword\" name=\"password\" label=\"旧密码\"\r\n                                placeholder=\"旧密码(6-16)位\" :rules=\"[{ required: true, message: '旧请填写密码' }]\" />\r\n                            <van-field v-model=\"Password\" type=\"Password\" name=\"password\" label=\"新密码\"\r\n                                placeholder=\"密码(6-16)位\" :rules=\"[{ required: true, message: '请新填写密码' }]\" />\r\n                            <div class=\"SignupT\" @click=\"updatePassword\">确认修改</div>\r\n                        </van-form>\r\n                    </van-popup>\r\n                </van-cell>\r\n                <!-- 注销账号 -->\r\n                <van-cell>\r\n                    <van-cell is-link @click=\"showPopupt\">注销账号</van-cell>\r\n\r\n                </van-cell>\r\n                <br><br><br>\r\n                <div style=\"margin: 16px;bottom: 0%;\">\r\n                    <van-button round block color=\"rgb(13, 0, 255)\" type=\"info\" native-type=\"submit\" @click=\"tologin\">\r\n                        退出登录</van-button>\r\n                </div>\r\n            </div>\r\n        </BgBox>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { validForm } from '@/assets/validForm';\r\nimport BgBox from '../components/BgBox'\r\nexport default {\r\n    components: { BgBox },\r\n    setup() {\r\n        const onClickLeft = () => history.back();\r\n        return {\r\n            onClickLeft,\r\n        };\r\n    },\r\n    data() {\r\n        return {\r\n            show: false,\r\n            showt: false,\r\n            oldPassword: '',\r\n            Password: '',\r\n        }\r\n    },\r\n    methods: {\r\n        showPopup() {\r\n            this.show = true;\r\n        },\r\n        showPopupt() {\r\n            this.$dialog.confirm({\r\n                title: \"注销账号\",\r\n                message: \"是否确认注销账号,一旦确认无法恢复\",\r\n            })\r\n                .then(() => {\r\n                    this.godestroyAccount();\r\n                }).catch(err => { });\r\n        },\r\n\r\n        //修改密码\r\n        updatePassword() {\r\n            let o = {\r\n                phone: {\r\n                    value: this.oldpassword, //传递的一个值\r\n                    errorMsg: 'j旧密码由数字字母下划线组合(6-16字符)', //就是不符合规则是弹出的信息\r\n                    reg: /^[A-ZA-z]\\w{5,15}$/ //正则\r\n                },\r\n                password: {\r\n                    value: this.password,\r\n                    errorMsg: '密码由数字字母下划线组合(6-16字符)',\r\n                    reg: /^[A-ZA-z]\\w{5,15}$/\r\n                },\r\n            };\r\n            let isPass = validForm.valid(o);\r\n            if (isPass) {                \r\n                if(this.oldPassword == this.Password){\r\n                    this.$toast(\"新密码和旧密码不能相同\");\r\n                    return;\r\n                }\r\n                \r\n                let tokenString = localStorage.getItem(\"token\");\r\n                if (!tokenString) {\r\n                    this.$toast(\"请先登录\");\r\n                    return this.$router.push({ name: \"Login\" });\r\n                }\r\n                this.$toast.loading({\r\n                    message: \"加载中……\",\r\n                    forbidClick: true,\r\n                    duration: 0,\r\n                });\r\n                this.axios({\r\n                    method: \"POST\",\r\n                    url: '/updatePassword',\r\n                    data: {\r\n                        appkey: this.appkey,\r\n                        tokenString,\r\n                        password: this.Password,\r\n                        oldPassword: this.oldPassword\r\n                    }\r\n                })\r\n                    .then((result) => {\r\n                        this.$toast(result.data.msg);\r\n                        \r\n                    })\r\n                    .catch((err) => {\r\n                        this.$toast.clear();\r\n                    })\r\n            }\r\n        },\r\n        //注销账号\r\n        godestroyAccount() {\r\n            let tokenString = localStorage.getItem(\"token\");\r\n            if (!tokenString) {\r\n                this.$toast(\"请先登录\");\r\n                return this.$router.push({ name: \"Login\" });\r\n            }\r\n            this.$toast.loading({\r\n                message: \"加载中……\",\r\n                forbidClick: true,\r\n                duration: 0,\r\n            });\r\n            this.axios({\r\n                method: \"POST\",\r\n                url: '/destroyAccount',\r\n                params: {\r\n                    appkey: this.appkey,\r\n                    tokenString,\r\n                }\r\n            })\r\n                .then((result) => {\r\n                    this.$toast.clear();\r\n                    localStorage.removeItem(\"token\");\r\n                    return this.$router.push({ name: \"Login\" });\r\n                    console.log(result);\r\n                })\r\n                .catch((err) => {\r\n                    this.$toast.clear();\r\n                })\r\n        },\r\n        tologin() {\r\n            this.$dialog.confirm({\r\n                title: \"退出登录\",\r\n                message: \"是否确认退出登录\",\r\n            })\r\n                .then(() => {\r\n                    this.gologout();\r\n                }).catch(err => { });\r\n        },\r\n        //退出登录\r\n        gologout() {\r\n            let tokenString = localStorage.getItem(\"token\");\r\n            if (!tokenString) {\r\n                this.$toast(\"请先登录\");\r\n                return this.$router.push({ name: \"Login\" });\r\n            }\r\n            this.$toast.loading({\r\n                message: \"加载中……\",\r\n                forbidClick: true,\r\n                duration: 0,\r\n            });\r\n            this.axios({\r\n                method: \"POST\",\r\n                url: '/logout',\r\n                params: {\r\n                    appkey: this.appkey,\r\n                    tokenString,\r\n                }\r\n            })\r\n                .then((result) => {\r\n                    this.$toast.clear();\r\n                    this.$router.push({ name: \"Login\" });\r\n                    if (result.data.code == 700) {\r\n                        this.$router.push({ name: \"Login\" });\r\n                    } else if (result.data.code == \"G001\") {\r\n                        setTimeout(() => {\r\n                            localStorage.removeItem(\"token\");\r\n                            this.$router.push({ name: \"Login\" });\r\n                        }, 800)\r\n                    }\r\n                    console.log(result);\r\n                })\r\n                .catch((err) => {\r\n                    this.$toast.clear();\r\n                })\r\n        }\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.conf {\r\n    background-color: rgb(247, 247, 247);\r\n    padding: 3px;\r\n    margin-right: 20px;\r\n    margin-top: -34px;\r\n    margin-left: 10px;\r\n    margin-right: 10px;\r\n    border-radius: 11px;\r\n    border-radius: 20px;\r\n}\r\n\r\n.Signup {\r\n    width: 90%;\r\n    height: 40px;\r\n    border-radius: 15px;\r\n    background-color: white;\r\n    color: rgb(54, 52, 52);\r\n    font-size: 15px;\r\n    text-align: center;\r\n    margin: 0 auto;\r\n    background-color: white;\r\n\r\n    line-height: 40px;\r\n\r\n    p {\r\n        float: left;\r\n        font-size: 25px;\r\n    }\r\n\r\n    .SignupT {\r\n        width: 12%;\r\n        height: 40px;\r\n        background-color: rgb(32, 77, 238);\r\n        border-radius: 19px;\r\n        width: 90%;\r\n        color: white;\r\n        margin: 0 auto;\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n.b1 {\r\n    width: 50%;\r\n    border: none;\r\n    color: rgb(0, 106, 255);\r\n    position: relative;\r\n    font-size: 16px;\r\n    background-color: #fff;\r\n}\r\n\r\n.b2 {\r\n    width: 50%;\r\n    border: none;\r\n    // color: rgb(0, 106, 255);\r\n    position: relative;\r\n    font-size: 16px;\r\n    background-color: #fff;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Secure.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Secure.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Secure.vue?vue&type=template&id=c4b8ebaa&scoped=true&\"\nimport script from \"./Secure.vue?vue&type=script&lang=js&\"\nexport * from \"./Secure.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Secure.vue?vue&type=style&index=0&id=c4b8ebaa&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c4b8ebaa\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\n\r\n//导入提示组件\r\nimport { Toast } from 'vant'\r\n\r\n//注册提示组件\r\nVue.use(Toast)\r\n\r\n//表单验证模块\r\nclass ValidForm {\r\n\r\n  constructor() {}\r\n\r\n  //验证表单方法\r\n  valid(o) {\r\n    //o: 表单验证数据， object\r\n    // \r\n    // \r\n\r\n    for (let key in o) {\r\n      if (!o[key].reg.test(o[key].value)) {\r\n        \r\n\r\n        //提示错误信息\r\n        Toast(o[key].errorMsg);\r\n        //表单验证不通过\r\n        return false;\r\n      }\r\n    }\r\n\r\n    //表单验证通过\r\n    return true;\r\n  }\r\n\r\n}\r\n\r\n//导出表单验证模块实例\r\nexport const validForm = new ValidForm();"],"names":["render","_vm","this","_c","_self","staticClass","_t","staticRenderFns","name","component","attrs","on","onClickLeft","showPopup","_v","style","height","model","value","show","callback","$$v","expression","required","message","oldPassword","Password","updatePassword","showPopupt","staticStyle","tologin","components","BgBox","setup","data","showt","methods","title","then","catch","err","phone","errorMsg","reg","password","forbidClick","duration","method","url","appkey","tokenString","result","godestroyAccount","params","localStorage","gologout","setTimeout","console","Vue","ValidForm","constructor","valid","o","key","test","validForm"],"sourceRoot":""}