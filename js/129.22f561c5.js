"use strict";(self["webpackChunkrx"]=self["webpackChunkrx"]||[]).push([[129],{1129:function(t,a,e){e.r(a),e.d(a,{default:function(){return u}});var i=function(){var t=this,a=t._self._c;return a("div",{staticClass:"ShopInfo-box"},[a("van-nav-bar",{attrs:{title:"商品详情","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":function(a){t.showShare=!0}},scopedSlots:t._u([{key:"right",fn:function(){return[a("van-icon",{attrs:{name:"ellipsis",size:"18"}})]},proxy:!0}])}),a("div",[a("img",{staticClass:"auto_img",attrs:{src:t.ChatDetail.large_img}})]),a("div",{staticClass:"Detail-box"},[a("div",{staticClass:"info-box"},[a("div",{staticClass:"priceAndchatName-box clearfix"},[a("div",{staticClass:"fl"},[a("div",{staticClass:"chatName"},[t._v(t._s(t.ChatDetail.name))]),a("div",{staticClass:"chatEnName"},[t._v(t._s(t.ChatDetail.enname))])]),a("div",{staticClass:"chatPrice"},[t._v("￥"+t._s(t.ChatDetail.price))])]),a("div",{staticClass:"rule-box"},[a("div",{staticClass:"rule-item clearfix"},[a("div",{staticClass:"rule-title fl",attrs:{model:t.ruleData.rule.drink}},[t._v("温度")]),a("div",{staticClass:"fl"},[a("div",{staticClass:"r-item fl",class:"冷"==t.ruleData.rule.drink?"active":"",on:{click:function(a){t.ruleData.rule.drink="冷"}}},[t._v("冷")]),a("div",{staticClass:"r-item fl",class:"热"==t.ruleData.rule.drink?"active":"",on:{click:function(a){t.ruleData.rule.drink="热"}}},[t._v("热")])])]),a("div",{staticClass:"rule-item clearfix"},[a("div",{staticClass:"rule-title fl",attrs:{"v-model":t.ruleData.rule.sugar}},[t._v("糖")]),a("div",{staticClass:"fl"},[a("div",{staticClass:"r-item fl",class:"无糖"==t.ruleData.rule.sugar?"active":"",on:{click:function(a){t.ruleData.rule.sugar="无糖"}}},[t._v("无糖")]),a("div",{staticClass:"r-item fl",class:"半糖"==t.ruleData.rule.sugar?"active":"",on:{click:function(a){t.ruleData.rule.sugar="半糖"}}},[t._v("半糖")]),a("div",{staticClass:"r-item fl",class:"全糖"==t.ruleData.rule.sugar?"active":"",on:{click:function(a){t.ruleData.rule.sugar="全糖"}}},[t._v("全糖")])])])]),a("div",{staticClass:"c-box clearfix"},[a("div",{staticClass:"select-c fl"},[t._v("选择数量")]),a("div",{staticClass:"counts-box fr"},[a("van-stepper",{attrs:{theme:"round","button-size":"22","disable-input":""},model:{value:t.ruleData.count,callback:function(a){t.$set(t.ruleData,"count",a)},expression:"ruleData.count"}})],1)]),a("div",{staticClass:"desc-box"},[a("div",{staticClass:"desc-title"},[t._v("商品描述")]),a("div",{staticClass:"desc-text"},[a("div",{staticClass:"context"},[t._v(" "+t._s(t.ChatDetail.desc)+" ")])])])])]),a("van-goods-action",[a("van-goods-action-icon",{attrs:{TO:{name:"shopbag"},icon:"bag",text:"购物袋",badge:0==t.bagCount?"":t.bagCount,color:t.bagCount>0?"#1A73E8":"#646566"},on:{click:t.goshopbag}}),a("van-goods-action-icon",{attrs:{icon:"like",text:t.isLike?"已收藏":"收藏",color:t.isLike?"#1A73E8":"#646566"},on:{click:t.toggleLikeproduct}}),a("van-goods-action-button",{attrs:{type:"warning",color:"#6A91EC",text:"加入购物车"},on:{click:t.addShopbag}})],1)],1)},s=[],o=(e(6743),e(8848)),l={name:"Detall",data(){return{ChatDetail:{},ruleData:{count:1,rule:{sugar:"半糖",drink:"冷"}},showShare:!1,options:[[{name:"微信",icon:"wechat"},{name:"朋友圈",icon:"wechat-moents"},{name:"微博",icon:"weibo"},{name:"QQ",icon:"qq"}],[{name:"微信",icon:"wechat"},{name:"微信",icon:"wechat"},{name:"微信",icon:"wechat"},{name:"微信",icon:"wechat"}]],isLike:"",productDetail:{},bagCount:0,pid:""}},created(){this.pid=this.$route.params.pid,this.getChatDetail(),this.findLike(),this.shopBagCount()},computed:{},methods:{beforeMount(){this.getChatDetail()},onClickLeft(){this.$router.go(-1)},onSelect(t){(0,o.Z)(t.name),this.showShare=!1},getChatDetail(){this.axios({method:"GET",url:"/productDetail",params:{appkey:this.appkey,pid:this.pid}}).then((t=>{this.$toast.clear(),600==t.data.code&&(this.ChatDetail=t.data.result[0])}),(t=>{console.log(t)}))},findLike(){let t=localStorage.getItem("token");t&&(this.$toast.loading({message:"加载中……",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findlike",params:{appkey:this.appkey,pid:this.pid,tokenString:t}}).then((t=>{this.Toast.clear(),1e3==t.data.code&&t.data.result.length>0&&(this.isLike=!0)})).catch((t=>{})))},toggleLikeproduct(){let t=localStorage.getItem("token");if(!t)return this.$toast("请先登录"),this.$router.push({name:"Login"});let a=this.isLike?"/notlike":"/like";this.$toast.loading({message:"加载中。。。",forbidClick:!0,duration:0}),this.axios({method:"POST",url:a,data:{appkey:this.appkey,pid:this.pid,tokenString:t}}).then((t=>{this.$toast.clear(),console.log(t),700==t.data.code?this.$router.push({name:"Login"}):"800"==t.data.code?this.isLike=!0:(t.data.code="900")&&this.isLike})).catch((t=>{this.$toast.clear()}))},togleRule(t,a){},shopBagCount(){let t=localStorage.getItem("token");t&&(this.$toast.loading({message:"加载中。。。",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/shopcarRows",params:{appkey:this.appkey,tokenString:t}}).then((t=>{this.$toast.clear()})).catch((t=>{this.$toast.clear()})))},addShopbag(t){let a=localStorage.getItem("token");if(!a)return this.$toast("请先登录"),this>$router.push({name:"Login"});this.axios({method:"POST",url:"addShopcart",data:{pid:this.pid,count:this.ruleData.count,appkey:this.appkey,rule:this.ruleData.rule.drink+"/"+this.ruleData.rule.sugar,tokenString:a}}).then((t=>{console.log(t)}))},goshopbag(){this.$router.push({name:"Shopbag"})},goPay(t){this.$router.push({name:"Pay",query:{sids:"_s1666528538645"}})}}},c=l,r=e(1001),n=(0,r.Z)(c,i,s,!1,null,"dedc1352",null),u=n.exports}}]);
//# sourceMappingURL=129.22f561c5.js.map