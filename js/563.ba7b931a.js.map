{"version":3,"file":"js/563.ba7b931a.js","mappings":"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","sources":["webpack://rx/./src/views/Shopbag.vue","webpack://rx/src/views/Shopbag.vue","webpack://rx/./src/views/Shopbag.vue?37ea","webpack://rx/./src/views/Shopbag.vue?e378"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"shopbag\"},[_c('van-nav-bar',{attrs:{\"title\":\"购物车\",\"left-text\":\"返回\",\"left-arrow\":\"\",\"fixed\":\"\"},on:{\"click-left\":_vm.back,\"click-right\":function($event){_vm.isEdit = !_vm.isEdit}},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [(_vm.shopbagData.length > 0)?_c('div',{staticClass:\"shouye\"},[_c('span',[_vm._v(_vm._s(_vm.isEdit ? \"完成\" : \"编辑\"))])]):_vm._e()]},proxy:true}])}),_vm._m(0),_c('br'),_c('br'),_c('br'),_c('br'),(_vm.shopbagData.length == 0)?_c('div',[_c('van-empty',{attrs:{\"description\":\"购物车空空如也，去逛逛\"}},[_c('van-button',{staticClass:\"bottom-button\",attrs:{\"round\":\"\",\"color\":\"#1A73E8\"},on:{\"click\":function($event){return _vm.getMain()}}},[_vm._v(\" 逛一逛 \")])],1)],1):_c('div',{staticClass:\"shopbag-box\"},[_c('div',{staticClass:\"shopbag-bg\"},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"offset\":\"20\"},on:{\"load\":_vm.loadData},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},[_c('div',{staticClass:\"shopbag-product\"},_vm._l((_vm.shopbagData),function(item,index){return _c('div',{key:item.sid,staticClass:\"shopbag-item\"},[_c('div',{staticClass:\"cell-item\"},[_c('van-swipe-cell',{attrs:{\"disabled\":_vm.isEdit},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-button',{staticClass:\"delete-button\",attrs:{\"square\":\"\",\"type\":\"danger\",\"text\":\"删除\"},on:{\"click\":function($event){return _vm.removeOne(index, item.sid)}}})]},proxy:true}],null,true)},[_c('div',{staticClass:\"clearfix cell-item-box\"},[_c('div',{staticClass:\"check-box fl\"},[_c('van-checkbox',{attrs:{\"checked-color\":\"#1A73E8\"},on:{\"change\":_vm.simpleSelect},model:{value:(item.isChecked),callback:function ($$v) {_vm.$set(item, \"isChecked\", $$v)},expression:\"item.isChecked\"}})],1),_c('div',{staticClass:\"fl pro-info-box\"},[_c('div',{staticClass:\"fl pro-img\"},[_c('img',{staticClass:\"auto-img\",attrs:{\"src\":item.small_img,\"alt\":\"\"}})]),_c('div',{staticClass:\"fl pro-info\"},[_c('div',{staticClass:\"pro-info-text\"},[_c('div',{staticClass:\"names clearfix\"},[_c('div',{staticClass:\"fl pro-name\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"fl pro-rule\"},[_vm._v(_vm._s(item.rule))])]),_c('div',{staticClass:\"pro-enname\"},[_vm._v(_vm._s(item.enname))])]),_c('div',{staticClass:\"pro-count-box\"},[_c('div',{staticClass:\"pro-price fl\"},[_vm._v(\"￥\"+_vm._s(item.price))]),_c('div',{staticClass:\"step-box fr\"},[_c('van-stepper',{attrs:{\"theme\":\"round\",\"button-size\":\"20\",\"disable-input\":\"\"},on:{\"change\":function($event){return _vm.changCount(item)}},model:{value:(item.count),callback:function ($$v) {_vm.$set(item, \"count\", $$v)},expression:\"item.count\"}})],1)])])])])])],1)])}),0)])],1),(!_vm.isEdit)?_c('van-submit-bar',{attrs:{\"price\":_vm.total,\"button-text\":\"提交订单\",\"button-color\":\"#1A73E8\"},on:{\"submit\":_vm.commit}},[_c('van-checkbox',{on:{\"click\":_vm.allSelect},model:{value:(_vm.isAllChecked),callback:function ($$v) {_vm.isAllChecked=$$v},expression:\"isAllChecked\"}},[_vm._v(\" 全选 \")])],1):_c('van-submit-bar',{attrs:{\"button-text\":\"删除选择\",\"button-color\":\"#EE0A24\"},on:{\"submit\":_vm.removeSelected}},[_c('van-checkbox',{staticStyle:{\"width\":\"auto\",\"height\":\"50px\",\"position\":\"relative\",\"right\":\"177px\"},on:{\"click\":_vm.allSelect},model:{value:(_vm.isAllChecked),callback:function ($$v) {_vm.isAllChecked=$$v},expression:\"isAllChecked\"}},[_vm._v(\" 全选 \")])],1)],1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"icon\"},[_c('img',{attrs:{\"src\":require(\"../assets/images/shopbag_bg.png\"),\"alt\":\"\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"shopbag\">\r\n    <van-nav-bar title=\"购物车\" left-text=\"返回\" left-arrow fixed @click-left=\"back\" @click-right=\"isEdit = !isEdit\">\r\n      <template #right>\r\n        <div class=\"shouye\" v-if=\"shopbagData.length > 0\">\r\n          <span>{{ isEdit ? \"完成\" : \"编辑\" }}</span>\r\n        </div>\r\n      </template>\r\n    </van-nav-bar>\r\n    <div class=\"icon\">\r\n      <img src=\"../assets/images/shopbag_bg.png\" alt=\"\" />\r\n    </div>\r\n    <br /><br /><br /><br />\r\n    <div v-if=\"shopbagData.length == 0\">\r\n      <van-empty description=\"购物车空空如也，去逛逛\">\r\n        <van-button round color=\"#1A73E8\" class=\"bottom-button\" @click=\"getMain()\">\r\n          逛一逛\r\n        </van-button>\r\n      </van-empty>\r\n    </div>\r\n    <div class=\"shopbag-box\" v-else>\r\n      <div class=\"shopbag-bg\">\r\n        <!-- 懒加载组件 -->\r\n        <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"loadData\" offset=\"20\">\r\n          <div class=\"shopbag-product\">\r\n            <div class=\"shopbag-item\" v-for=\"(item, index) in shopbagData\" :key=\"item.sid\">\r\n              <div class=\"cell-item\">\r\n                <van-swipe-cell :disabled=\"isEdit\">\r\n\r\n                  <div class=\"clearfix cell-item-box\">\r\n                    <div class=\"check-box fl\">\r\n                      <van-checkbox @change=\"simpleSelect\" v-model=\"item.isChecked\" checked-color=\"#1A73E8\" />\r\n                    </div>\r\n                    <div class=\"fl pro-info-box\">\r\n                      <div class=\"fl pro-img\">\r\n                        <img class=\"auto-img\" :src=\"item.small_img\" alt=\"\" />\r\n                      </div>\r\n                      <div class=\"fl pro-info\">\r\n                        <div class=\"pro-info-text\">\r\n                          <div class=\"names clearfix\">\r\n                            <div class=\"fl pro-name\">{{ item.name }}</div>\r\n                            <div class=\"fl pro-rule\">{{ item.rule }}</div>\r\n                          </div>\r\n                          <div class=\"pro-enname\">{{ item.enname }}</div>\r\n                        </div>\r\n                        <div class=\"pro-count-box\">\r\n                          <div class=\"pro-price fl\">￥{{ item.price }}</div>\r\n                          <div class=\"step-box fr\">\r\n                            <van-stepper v-model=\"item.count\" theme=\"round\" button-size=\"20\" disable-input\r\n                              @change=\"changCount(item)\" />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <template #right>\r\n                    <van-button square type=\"danger\" text=\"删除\" @click=\"removeOne(index, item.sid)\"\r\n                      class=\"delete-button\" />\r\n                  </template>\r\n                </van-swipe-cell>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </van-list>\r\n      </div>\r\n      <!-- <div class=\"shopbag-submit\"> -->\r\n      <van-submit-bar v-if=\"!isEdit\" :price=\"total\" button-text=\"提交订单\" button-color=\"#1A73E8\" @submit=\"commit\">\r\n        <van-checkbox v-model=\"isAllChecked\" @click=\"allSelect\">\r\n          全选\r\n        </van-checkbox>\r\n      </van-submit-bar>\r\n      \r\n      <van-submit-bar v-else button-text=\"删除选择\" button-color=\"#EE0A24\" @submit=\"removeSelected\">\r\n        <van-checkbox v-model=\"isAllChecked\" @click=\"allSelect\"\r\n          style=\"width:auto;height:50px; position: relative; right:177px;\">\r\n          全选\r\n        </van-checkbox>\r\n      </van-submit-bar>\r\n      <!-- </div> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"Shopbag\",\r\n  data() {\r\n    return {\r\n      isCheck: false,\r\n      count: 2,\r\n      isAllChecked: false,\r\n\r\n      // 触发加载\r\n      loading: true,\r\n      // 是否全部加载完成数据\r\n      finished: false,\r\n      // 是否处于编辑状态\r\n      isEdit: false,\r\n      // 所有购物车数据\r\n      allShopbagData: [],\r\n      // 每次触发底部加载截取8条数据\r\n      dataCount: 8,\r\n      // 开始截取购物车数据位置\r\n      startIndex: 0,\r\n      // 购物车的数据\r\n      shopbagData: [],\r\n      // 订单总金额\r\n      total: 0,\r\n    };\r\n  },\r\n  created() {\r\n    this.getShopbagData();\r\n  },\r\n  methods: {\r\n    // 返回上一级\r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n    getMain() {\r\n      return this.$router.push({ name: \"Menu\" });\r\n    },\r\n    // 获取购物车数据\r\n    getShopbagData() {\r\n      let tokenString = localStorage.getItem(\"token\");\r\n\r\n      if (!tokenString) {\r\n        // 没有token跳回登录页面\r\n        this.$toast(\"请先登录\");\r\n        this.$router.push({ name: \"Login\" });\r\n        return;\r\n      }\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n      });\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/findAllShopcart\",\r\n        params: {\r\n          appkey: this.appkey,\r\n          tokenString,\r\n        },\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n          console.log(result.data.result);\r\n          // this.shopbagData = result.data.result;\r\n          if (result.data.code == 700) {\r\n            this.$router.push({ name: \"Login\" });\r\n          } else if (result.data.code == 5000) {\r\n            result.data.result.map((v) => {\r\n              v.isChecked = false;\r\n            });\r\n            this.allShopbagData = result.data.result;\r\n            //   根据开始截取位置和截取数据数量设置购物车显示的数据\r\n            this.shopbagData = this.allShopbagData.slice(\r\n              this.startIndex,\r\n              this.startIndex + this.dataCount\r\n            );\r\n            this.startIndex += this.dataCount;\r\n            // 未加载\r\n            this.loading = false;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.$toast.clear();\r\n        });\r\n    },\r\n    // 懒加载购物车数据\r\n    loadData() {\r\n      setTimeout(() => {\r\n        // 在allShopbagData中截取数据\r\n        let data = this.allShopbagData.slice(\r\n          this.startIndex,\r\n          this.startIndex + this.dataCount\r\n        );\r\n\r\n        this.startIndex += this.dataCount;\r\n        this.shopbagData.push(...data);\r\n\r\n        this.isAllChecked = false;\r\n        // 如果当前截取数据不足8条数据，下次不可能截取数据\r\n        if (data.length < this.dataCount) {\r\n          this.finished = true;\r\n        } else {\r\n          // 每次触发onload事件都需要将修改\r\n          this.loading = false;\r\n        }\r\n      }, 1500);\r\n    },\r\n    // 全选\r\n    allSelect() {\r\n      this.shopbagData.map((v) => {\r\n        v.isChecked = this.isAllChecked;\r\n      });\r\n      this.sum();\r\n    },\r\n    // 单选\r\n    simpleSelect() {\r\n      this.sum();\r\n      for (let i = 0; i < this.shopbagData.length; i++) {\r\n        if (!this.shopbagData[i].isChecked) {\r\n          this.isAllChecked = false;\r\n          return;\r\n        }\r\n      }\r\n      this.isAllChecked = true;\r\n    },\r\n    // 单个删除\r\n    removeOne(index, sid) {\r\n      // index:this.shopbagData 数组元素的下标\r\n      // sid:购物车\r\n      let tokenString = localStorage.getItem(\"token\");\r\n\r\n      if (!tokenString) {\r\n        // 没有token跳回登录页面\r\n        this.$toast(\"请先登录\");\r\n        this.$router.push({ name: \"Login\" });\r\n        return;\r\n      }\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n      });\r\n      this.axios({\r\n        method: \"POST\",\r\n        url: \"/deleteShopcart\",\r\n        data: {\r\n          appkey: this.appkey,\r\n          tokenString,\r\n          sids: JSON.stringify([sid]),\r\n        },\r\n      })\r\n        .then((result) => {\r\n          location.reload();\r\n          this.$toast.caller();         \r\n          if (result.data.code == 700) {\r\n            this.$router.push({ name: \"Login\" });\r\n          } else if (result.data.code == 7000) {\r\n            // 如果删除成功，则移除页面的商品，重新计算订单金额\r\n            this.shopbagData.splice(index, 1);\r\n            this.sum();\r\n          }\r\n          this.$toast(result.data.msg);\r\n        })\r\n        .catch((err) => {\r\n          this.$toast.clear();\r\n        });\r\n    },\r\n    // 判断是否勾选商品\r\n    isSelectProduct(msg) {\r\n      for (let i = 0; i < this.shopbagData.length; i++) {\r\n        if (this.shopbagData[i].isChecked) {\r\n          // 如果存在勾选商品\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n\r\n    // 删除选择\r\n    removeSelected() {\r\n      let isHas = this.isSelectProduct();\r\n      if (!isHas) {\r\n        this.$toast(\"请选择删除的商品\");\r\n        return;\r\n      }\r\n      // sids:勾选商品的购物车sid的集合\r\n      let sids = [];\r\n      this.shopbagData.map((v) => {\r\n        if (v.isChecked) {\r\n          sids.push(v.sid);\r\n        }\r\n      });\r\n      // 获取token\r\n      let tokenString = localStorage.getItem(\"token\");\r\n\r\n      if (!tokenString) {\r\n        // 没有token跳回登录页面\r\n        this.$toast(\"请先登录\");\r\n        this.$router.push({ name: \"Login\" });\r\n        return;\r\n      }\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n      });\r\n      this.axios({\r\n        method: \"POST\",\r\n        url: \"/deleteShopcart\",\r\n        data: {\r\n          appkey: this.appkey,\r\n          tokenString,\r\n          sids: JSON.stringify(sids),\r\n        },\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n          if (result.data.code == 700) {\r\n            this.$router.push({ name: \"Login\" });\r\n          } else if (result.data.code == 7000) {\r\n            // 如果删除称号，则移除页面的商品，重新计算订单金额\r\n            // 移除页面数据\r\n            for (let i = 0; i < this.shopbagData.length; i++) {\r\n              if (this.shopbagData[i].isChecked) {\r\n                this.shopbagData.splice(i, 1);\r\n                i--;\r\n              }\r\n            }\r\n            this.sum();\r\n          }\r\n          this.$toast(result.data.msg);\r\n        })\r\n        .catch((err) => {\r\n          this.$toast.clear();\r\n        });\r\n    },\r\n    // 修改数量\r\n    changCount(item) {\r\n      // sid:购物车sid\r\n      // count：商品数量\r\n      let tokenString = localStorage.getItem(\"token\");\r\n\r\n      if (!tokenString) {\r\n        // 没有token跳回登录页面\r\n        this.$toast(\"请先登录\");\r\n        this.$router.push({ name: \"Login\" });\r\n        return;\r\n      }\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n      });\r\n      this.axios({\r\n        method: \"POST\",\r\n        url: \"/modifyShopcartCount\",\r\n        data: {\r\n          appkey: this.appkey,\r\n          tokenString,\r\n          sid: item.sid,\r\n          count: item.count,\r\n        },\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n          if (result.data.code == 700) {\r\n            this.$router.push({ name: \"Login\" });\r\n          } else if (result.data.code == 6000) {\r\n            if (item.isChecked) {\r\n              this.sum;\r\n            }\r\n          } else {\r\n            this.$toast(result.data.msg);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.$toast.clear();\r\n        });\r\n    },\r\n    // 计算订单数据\r\n    sum() {\r\n      this.total = 0;\r\n      this.shopbagData.map((v) => {\r\n        if (v.isChecked) {\r\n          this.total += v.price * v.count;\r\n        }\r\n      });\r\n      this.total *= 100;\r\n    },\r\n    // 提交订单，跳转到订单页\r\n    commit() {\r\n      let isHas = this.isSelectProduct();\r\n      if (!isHas) {\r\n        this.$toast(\"请选择购买的商品\");\r\n        return;\r\n      }\r\n      // sids：勾选商品的购物车sid集合\r\n      let sids = [];\r\n      this.shopbagData.map((v) => {\r\n        if (v.isChecked) {\r\n          sids.push(v.sid);\r\n        }\r\n      });\r\n      // 跳转到结算页面sids查询参数\r\n      this.$router.push({ name: \"Pay\", query: { sids: sids.join(\"-\") } });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.shopbag {\r\n    position: relative;\r\n\r\n    // top: -350px;\r\n    .icon {\r\n\r\n        position: relative;\r\n        top: 50px;\r\n\r\n        img {\r\n            width: 100%;\r\n        }\r\n    }\r\n\r\n    .shopbag-box {\r\n        padding: 2px;\r\n        padding-bottom: 50px;\r\n\r\n        .shopbag-bg {\r\n            .shopbag-product {\r\n                .cell-item {\r\n                    width: 95%;\r\n                    height: 30%;\r\n                    // border: 1px solid #000;\r\n                    // background-color: rgb(255, 255, 255);\r\n                    background-color: aqua;\r\n                    border-radius: 10px;\r\n                    margin: 0 10px 10px 10px;\r\n                    \r\n                    .check-box {\r\n                        width: 20px;\r\n                        height: 20px;\r\n                        // border: 1px solid #000;\r\n                        position: relative;\r\n                        top: 30px;\r\n                        margin: 5px;\r\n                    }\r\n\r\n                    .pro-info-box {\r\n                        .pro-img {\r\n                            margin: 5px;\r\n\r\n                            .auto-img {\r\n                                width: 80px;\r\n                                height: 80px;\r\n                            }\r\n                        }\r\n\r\n                        .pro-info {\r\n                            width: 220px;\r\n                            height: 75px;\r\n                            // border: 1px solid #000;\r\n                            margin: 8px 0 0 2px ;\r\n                            .names {\r\n                                .pro-name {\r\n                                    width: 90px;\r\n                                    height: 20px;\r\n                                    // border: 1px solid #000;\r\n                                }\r\n                            }\r\n                            .pro-enname{\r\n                                width: auto;\r\n                                height: 15px;\r\n                                // border: 1px solid #000;\r\n                                margin: 0 0 10px 0;\r\n                                display: -webkit-box;\r\n                                overflow: hidden;\r\n                                text-overflow: ellipsis;\r\n                                -webkit-line-clamp: 1;\r\n                                -webkit-box-orient: vertical;\r\n                            }\r\n                            .pro-count-box{\r\n                                .pro-price {\r\n                                    width: 50px;\r\n                                    height: 20px;\r\n                                    // border: 1px solid #000;\r\n                                    color: rgb(247, 7, 7);\r\n                                    font-weight: bold;\r\n                                    font-size: 15px;\r\n                                    \r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    .delete-button{\r\n                        // width: 60px;\r\n                        height: 100%;\r\n                        // border: 1px solid #000;\r\n                        // position: relative; \r\n                        // right:100px;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .van-submit-bar {\r\n            // width: 100%;\r\n            // height: 8%;\r\n            // top: 85%;\r\n            // position: fixed;\r\n            // z-index: 40;\r\n            margin-bottom: 50px;\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Shopbag.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Shopbag.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Shopbag.vue?vue&type=template&id=5fa1ed06&scoped=true&\"\nimport script from \"./Shopbag.vue?vue&type=script&lang=js&\"\nexport * from \"./Shopbag.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Shopbag.vue?vue&type=style&index=0&id=5fa1ed06&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fa1ed06\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","back","$event","isEdit","scopedSlots","_u","key","fn","shopbagData","length","_v","_s","_e","proxy","_m","getMain","finished","loadData","model","value","loading","callback","$$v","expression","_l","item","index","sid","removeOne","simpleSelect","isChecked","$set","small_img","name","rule","enname","price","changCount","count","removeSelected","staticStyle","allSelect","isAllChecked","total","commit","staticRenderFns","require","data","isCheck","allShopbagData","dataCount","startIndex","created","methods","getShopbagData","message","forbidClick","duration","method","url","params","appkey","tokenString","then","result","console","v","catch","err","setTimeout","sids","location","isSelectProduct","i","sum","query","component"],"sourceRoot":""}